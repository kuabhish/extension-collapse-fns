"use strict";var h=Object.create;var u=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var I=(n,t)=>{for(var i in t)u(n,i,{get:t[i],enumerable:!0})},v=(n,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of C(t))!N.call(n,c)&&c!==i&&u(n,c,{get:()=>t[c],enumerable:!(o=A(t,c))||o.enumerable});return n};var F=(n,t,i)=>(i=n!=null?h($(n)):{},v(t||!n||!n.__esModule?u(i,"default",{value:n,enumerable:!0}):i,n)),y=n=>v(u({},"__esModule",{value:!0}),n);var b={};I(b,{activate:()=>E,deactivate:()=>T});module.exports=y(b);var e=F(require("vscode"));function E(n){let t=e.commands.registerCommand("vaderCollapseFns.collapseAllFunctions",async()=>{console.log("Collapse All Functions command triggered");let o=e.window.activeTextEditor;if(!o){console.log("No active editor found"),e.window.showInformationMessage("No active editor found!");return}console.log(`Active editor found, language: ${o.document.languageId}, file: ${o.document.fileName}`);let c=o.document.getText(),d=[],f=o.document.languageId==="python",w=f?/^([ ]*)def\s+(\w+)\s*\((.*?)\)\s*:/gm:/^\s*(function)\s+(\w+)\s*(?:\((.*?)\))?\s*{/gm;console.log(`Using regex for ${f?"Python":"JS/TS"}`);let g,m=0;for(;(g=w.exec(c))!==null;){let r=o.document.positionAt(g.index).line,s=o.document.lineAt(r);console.log(`debug -- line ${r+1}: ${s.text}`,s,s.range),d.push(s.range),m++}if(d.length===0){console.log("No functions found in the file"),e.window.showInformationMessage("No functions found to collapse!");return}console.log(`Total functions to collapse: ${m}`);for(let r of d){let s=r.start.line,x=o.document.lineAt(s).firstNonWhitespaceCharacterIndex,a=s;for(let l=s+1;l<o.document.lineCount;l++){let p=o.document.lineAt(l).text;if(p.trim()===""||p.trim().startsWith("#"))continue;if(o.document.lineAt(l).firstNonWhitespaceCharacterIndex<=x)break;a=l}if(a>s){let l=new e.Range(s,0,a,o.document.lineAt(a).text.length);o.selection=new e.Selection(l.start,l.start),await e.commands.executeCommand("editor.fold"),console.log(`Folding function from line ${s+1} to ${a+1}`)}else console.log(`Skipping fold for one-liner function at line ${s+1}`)}console.log(`Successfully collapsed ${d.length} functions`),e.window.showInformationMessage(`Collapsed ${d.length} functions`)}),i=e.commands.registerCommand("vaderCollapseFns.expandAllFunctions",async()=>{console.log("Expand All Functions command triggered");let o=e.window.activeTextEditor;if(!o){console.log("No active editor found"),e.window.showInformationMessage("No active editor found!");return}console.log(`Expanding all folds in file: ${o.document.fileName}`),await e.commands.executeCommand("editor.unfoldAll"),console.log("All folds expanded"),e.window.showInformationMessage("Expanded all functions")});n.subscriptions.push(t,i)}function T(){}0&&(module.exports={activate,deactivate});
