"use strict";var A=Object.create;var f=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var F=(n,t)=>{for(var s in t)f(n,s,{get:t[s],enumerable:!0})},w=(n,t,s,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of $(t))!I.call(n,l)&&l!==s&&f(n,l,{get:()=>t[l],enumerable:!(o=C(t,l))||o.enumerable});return n};var L=(n,t,s)=>(s=n!=null?A(N(n)):{},w(t||!n||!n.__esModule?f(s,"default",{value:n,enumerable:!0}):s,n)),y=n=>w(f({},"__esModule",{value:!0}),n);var T={};F(T,{activate:()=>E,deactivate:()=>S});module.exports=y(T);var e=L(require("vscode"));function E(n){let t=e.commands.registerCommand("vaderCollapseFns.collapseAllFunctions",async()=>{console.log("Collapse All Functions command triggered");let o=e.window.activeTextEditor;if(!o){console.log("No active editor found"),e.window.showInformationMessage("No active editor found!");return}console.log(`Active editor found, language: ${o.document.languageId}, file: ${o.document.fileName}`);let l=o.document.getText(),d=[],p=o.document.languageId==="python",x=p?/^([ ]*)def\s+(\w+)\s*\(([\s\S]*?)\)\s*(?:->\s*[\w\[\], ]+)?\s*:/gm:/^\s*(function)\s+(\w+)\s*(?:\((.*?)\))?\s*{/gm;console.log(`Using regex for ${p?"Python":"JS/TS"}`);let r,h=0;for(;(r=x.exec(l))!==null;){let g=o.document.positionAt(r.index).line,i=r.index+r[0].length,m=o.document.positionAt(i).line,u=o.document.lineAt(m);console.log(`Function starts at line ${g+1}, ends at line ${m+1}: ${u.text}`),d.push(u.range)}if(d.length===0){console.log("No functions found in the file"),e.window.showInformationMessage("No functions found to collapse!");return}console.log(`Total functions to collapse: ${h}`);for(let g of d){let i=g.start.line,u=o.document.lineAt(i).firstNonWhitespaceCharacterIndex,a=i;for(let c=i+1;c<o.document.lineCount;c++){let v=o.document.lineAt(c).text;if(v.trim()===""||v.trim().startsWith("#"))continue;if(o.document.lineAt(c).firstNonWhitespaceCharacterIndex<=u)break;a=c}if(a>i){let c=new e.Range(i,0,a,o.document.lineAt(a).text.length);o.selection=new e.Selection(c.start,c.start),await e.commands.executeCommand("editor.fold"),console.log(`Folding function from line ${i+1} to ${a+1}`)}else console.log(`Skipping fold for one-liner function at line ${i+1}`)}console.log(`Successfully collapsed ${d.length} functions`),e.window.showInformationMessage(`Collapsed ${d.length} functions`)}),s=e.commands.registerCommand("vaderCollapseFns.expandAllFunctions",async()=>{console.log("Expand All Functions command triggered");let o=e.window.activeTextEditor;if(!o){console.log("No active editor found"),e.window.showInformationMessage("No active editor found!");return}console.log(`Expanding all folds in file: ${o.document.fileName}`),await e.commands.executeCommand("editor.unfoldAll"),console.log("All folds expanded"),e.window.showInformationMessage("Expanded all functions")});n.subscriptions.push(t,s)}function S(){}0&&(module.exports={activate,deactivate});
